# 功能需求

## 1. ERP子系统

### 1.1 运营平台

面向运营服务商，主要用于管理服务和商户，如创建商户、分配软件授权、商户代运营、商户合同管理、财务结算、各类运营报表查询等。

#### 1.1.1 首页仪表盘

展示运营服务商的基本信息、商家数量、订单量、销售额等数据，方便运营服务商快速了解自己的业务情况。

| 功能模块 | 子功能 | 说明 |
| --- | --- | --- |
| 首页 | 运营分析数据 | 展示已签约商家数量，并按业态分类展示，并列表展示近7天新增商家数据 |
| | 会员分析数据 | 展示会员总数、新增会员数、活跃会员数等 |
| | 营销活动数据 | 展示当前进行中的营销活动数量、已结束活动数量等 |
| | 交易数据 | 展示商家交易金额汇总数据，支持近7天、近30天、近90天时间范围查询，并按支付方式分类展示。展示内容包括金额汇总、动销商家数、交易笔数 |

#### 1.1.2 商家管理

面向运营服务商管理签约商家，管理商家基本信息、门店、产品授权、商家主账号，合同管理等。

| 功能模块 | 子功能 | 说明 |
| --- | --- | --- |
| 商家管理 | 商家基本信息 | 管理商家的基本资料，包括名称、联系方式、地址等 |
| | 门店管理 | 管理商家下属门店的信息，包括门店名称、业态、地址、联系方式、门店状态（正常/停用）、软件授权有效期等，其中门店业态将会影响收银客户端的功能展示 |
| | 产品授权 | 配置商家可使用的产品模块和功能权限，已知产品包括： 荟客多（默认已授权）、微商城、外卖团购、融惠付、供应链、付费会员，支持按门店付费模式 |
| | 商家主账号 | 管理商家登录平台的账号信息 |
| | 合同管理 | 记录和管理与商家签订的合同信息，包括合同编号、有效期、服务内容等 |

#### 1.1.3 商家代运营

通过商家管理页选中指定商家进入商家代运营模块，该模块有独立的功能菜单，不使用运营平台的功能菜单。

| 功能模块 | 子功能 | 说明 |
| --- | --- | --- |
| 商家代运营 | 订单管理 | 查看并处理商家的订单，包括待接单、待取货、待送达、已完成、已取消等状态的订单 |
| | 商品管理 | 管理商家的商品信息，包括商品名称、规格、单价、库存等 |
| | 会员管理 | 查看和管理商家的会员信息，包括会员列表、会员等级、积分记录等 |
| | 营销管理 | 配置和管理商家的营销活动，包括优惠券、团购、秒杀等 |
| | 切换商家 | 切换当前代运营的商家，可切换为其他已签约的商家，切换后将刷新当前页面 |

#### 1.1.4 数据中心

数据中心模块提供商家相关的数据分析和统计功能，包括订单数据、会员数据、交易数据、营销数据等。

| 功能模块 | 子功能 | 说明 |
| --- | --- | --- |
| 数据中心 | 订单数据看板 | 展示商家的订单数据，包括订单量、订单金额、订单状态分布等 |
| | 会员数据看板 | 展示商家的会员数据，包括会员总数、新增会员数、活跃会员数等 |
| | 交易数据看板 | 展示商家的交易数据，包括交易金额、交易笔数、支付方式分布等 |
| | 营销数据看板 | 展示商家的营销数据，包括优惠券使用量、团购活动参与量、秒杀活动参与量等 |
| | 授权看板 | 展示商家的授权数据，包括已授权软件数量、授权到期时间等，许可证到期预警、激活率热力图 |
| | 支付分润看板 | 展示商家实时在线支付流水、金额汇总、分润金额、分润比例、分润趋势等 |

#### 1.1.5 财务结算

面向运营服务商，用于管理服务和商户的财务结算，包括资金账户管理、交易记录查询、结算单管理、资金记录查询等。

| 功能模块 | 子功能 | 说明 |
| --- | --- | --- |
| 财务结算 | 资金账户管理 | 管理商家的资金账户，包括余额、冻结金额、可用金额等 |
| | 结算单管理 | 生成和管理商家的结算单，包括结算金额、结算日期、结算状态等 |
| | 资金记录查询 | 查询商家的资金变动记录，包括充值记录、提现记录、支付记录、退款记录等 |

#### 1.1.6 账户中心

面向运营服务商，用于管理服务商的员工账号、部门机构、用户角色、权限管理等。

| 功能模块 | 子功能 | 说明 |
| --- | --- | --- |
| 账户中心 | 员工账号管理 | 管理服务商的员工账号，包括账号创建、账号停用、账号重置密码等 |
| | 部门机构管理 | 配置服务商的部门机构架构，包括部门名称、部门负责人、部门成员等 |
| | 用户角色管理 | 定义服务商的用户角色，包括角色名称、权限设置等 |

### 1.2 商家平台

### 1.3 收银客户端

### 1.4 微商城

#### 1.4.1 小程序主框架结构

##### 1.4.1.1 底部菜单
| 菜单名称 | 功能描述 |
| --- | --- |
| 首页 | 作为小程序的入口页面，展示各类推荐信息与快捷功能入口。 |
| 分类 | 按商品类别、服务类型等对商品和服务进行分类展示，方便用户查找。 |
| 购物车 | 汇总用户选中的商品，支持修改商品数量、删除商品及结算操作。 |
| 我的 | 展示用户个人信息、会员权益、订单入口、优惠券、积分、余额等内容。 |

##### 1.4.1.2 首页板块
| 板块名称 | 功能描述 |
| --- | --- |
| 搜索栏 | 支持用户输入关键词搜索商品、门店、商户等，具备智能联想和热门搜索推荐功能。 |
| 轮播图 | 展示平台的促销活动、热门商品、推荐商户等重要信息，支持点击跳转详情页。 |
| 功能导航 | 包含电商、点餐、团购等主要业务入口，以图标加文字形式展示，方便用户快速进入相应业务模块。 |
| 商家推荐 | 展示优质、热门商家，包含商家名称、评分、主营品类、优惠活动等信息，点击可进入商家详情页。 |
| 商品推荐 | 基于用户浏览历史、购买记录等进行个性化商品推荐，展示商品图片、名称、价格、销量等信息，支持点击进入商品详情页。 |
| 优惠活动 | 展示平台及各商家的优惠活动，如限时折扣、满减活动、优惠券领取入口等，吸引用户参与。 |
| 附近门店 | 基于用户地理位置，展示附近的门店，包含门店名称、距离、营业时间、优惠信息等，点击可查看门店详情及商品列表。 |

#### 1.4.2 小程序核心功能

##### 1.4.2.1 电商能力
- **商品展示**：支持多商户、多门店商品发布，每个商品展示图片、名称、价格、库存、规格、商家信息等。
- **商品详情**：展示商品详细信息、用户评价、商家介绍、相关推荐等，支持加入购物车和立即购买。
- **订单管理**：电商类订单状态包括待付款、待发货、待收货、已完成、已取消等，用户可查看订单详情、进行催发货、确认收货、申请退款等操作。

##### 1.4.2.2 点餐团购能力
- **点餐服务**：展示支持线上点餐到店自提的商家，到店订单状态包括待接单、制作中、待取餐、已完成、已取消等。
- **团购活动**：展示各类团购商品和服务，用户可参与团购，团购订单状态包括待支付、团购中、已成功、已失败、已消费、已退款等。

##### 1.4.2.3 会员营销与优惠券
- **会员体系**：用户登录即自动注册会员，根据消费金额、频次等累积积分，不同等级会员享有不同权益，如折扣、优先配送等。
- **优惠券管理**：支持商家和平台发放优惠券，用户可领取优惠券，在结算时选择使用，可查看优惠券的领取和使用历史。

##### 1.4.2.4 个人中心
- **订单历史**：分开展示电商订单、到店订单、团购订单，用户可快速查看不同类型订单的历史记录和当前状态。
- **领券用券历史**：记录用户领取和使用优惠券的详细信息，包括优惠券类型、金额、有效期、使用订单等。
- **积分与余额**：展示用户当前积分和账户余额，支持积分兑换商品或优惠券，余额可用于支付订单。

##### 1.4.2.5 购物车优化
考虑到用户可能同时添加电商类商品和到店商品，购物车将采用分类聚合的方式进行管理，具体设计如下：

| 功能模块 | 子功能 | 说明 |
| --- | --- | --- |
| 购物车分类 | 订单类型区分 | 按照订单类型（电商类、到店类、团购类）对商品进行分类展示，不同类型订单分开独立显示，方便用户区分。 |
| | 商家区分 | 在同一订单类型下，按照商家进行二次分类聚合，将同一商家的商品聚合在一起，方便用户统一结算。 |
| 结算操作 | 独立结算 | 每个订单类型可单独进行结算，用户可选择一次性结算所有订单类型，也可分别对不同订单类型进行结算。 |
| | 商家合并结算 | 对于同一商家的商品，支持合并结算；不同商家的商品需分别结算，确保订单处理的准确性。 |
| 商品管理 | 商品修改 | 用户可对购物车中的商品进行修改操作，如修改商品数量、删除商品等，操作实时更新购物车显示。 |
| | 跨类型操作 | 支持用户在不同订单类型的购物车之间移动商品，如将到店商品转为自提商品（若支持），但需符合相应业务规则。 |

#### 1.4.3 功能列表

| 功能模块 | 子功能 | 详细描述 |
| --- | --- | --- |
| **首页** | 搜索栏 | 支持用户输入关键词搜索商品、门店、商户，具备智能联想和热门搜索推荐。 |
| | 轮播图 | 展示促销活动、热门商品、推荐商户，点击可跳转详情页。 |
| | 功能导航 | 提供电商、点餐、团购、优惠活动、附近门店业务入口，图标加文字展示。 |
| | 商品推荐 | 基于用户行为个性化推荐商品，点击进入商品详情页。 |
| **分类** | 商品分类展示 | 按类别、服务类型分类展示商品和服务。 |
| **购物车** | 订单类型区分 | 按电商、到店、团购分类展示商品。 |
| | 商家区分 | 同一订单类型下按商家聚合商品。 |
| | 独立结算 | 各订单类型可单独或一次性结算。 |
| | 商家合并结算 | 同一商家商品支持合并结算，不同商家分开结算。 |
| | 商品修改 | 支持修改商品数量、删除商品，实时更新显示。 |
| | 跨类型操作 | 支持符合规则的商品在不同订单类型间移动。 |
| **我的** | 个人信息展示 | 展示用户基本信息。 |
| | 会员权益展示 | 显示会员等级、对应权益。 |
| | 订单入口 | 进入电商、到店、团购订单历史页面。 |
| | 优惠券管理 | 查看优惠券领取和使用历史，结算时可选择使用。 |
| | 积分管理 | 展示积分余额，支持积分兑换商品或优惠券。 |
| | 余额管理 | 展示账户余额，可用于支付订单。 |
| | 余额充值 | 支持用户余额在线充值，根据后台设置，支持固定面额充值或自定义金额充值。 |
| | 余额流水查询 | 展示用户余额充值、支付、提现等操作的明细记录，包括金额、时间、订单号等。 |
| **电商能力** | 商品展示 | 多商户、多门店商品发布，展示商品多维度信息。 |
| | 商品详情 | 展示商品详细信息、评价、商家介绍等，支持加入购物车和立即购买。 |
| | 订单管理 | 订单状态包括待付款、待发货等，支持催发货、确认收货、退款等操作。 |
| **点餐团购能力** | 点餐服务 | 展示支持线上点餐到店自提商家和商品，以商家维度完成点餐逻辑。用户可在小程序内进行下单、支付等操作。支持多规格、口味做法、加料加价等灵活定制。 |
| | 到店订单管理 | 订单状态包括待接单、待取餐等。 |
| | 消息推送 | 订单状态变更时通过微信订阅消息方式推送给用户。|
| | 团购活动 | 展示团购商品和服务，用户可参与团购。 |
| | 团购订单管理 | 订单状态包括待支付、团购中等。 |
| **会员营销与优惠券** | 会员注册 | 用户登录自动注册会员。 |
| | 积分累积 | 根据消费金额、频次累积积分。 |
| | 会员等级 | 不同等级会员享有不同权益。 |
| | 优惠券发放 | 商家和平台可发放优惠券。 |
| | 优惠券领取 | 用户可领取平台和商家优惠券。 |
| **订单历史** | 电商订单历史 | 展示电商订单记录和当前状态。 |
| | 到店订单历史 | 展示到店订单记录和当前状态。 |
| | 团购订单历史 | 展示团购订单记录和当前状态。 |
| **领券用券历史** | 优惠券记录 | 记录优惠券类型、金额、有效期、使用订单等信息。 |